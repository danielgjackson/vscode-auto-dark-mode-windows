<html>
<head>
<title>Web Preferred Color Scheme</title>
</head>
<body>
</body>
<script>
function watcher(callback, reference) {
    if (!window.matchMedia) {
        return -1;
    }
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    const listener = (event) => {
        callback(event.matches ? 0 : 1, reference);       // 0=dark, 1=light
    };
    mediaQuery.addEventListener('change', listener);
    listener(mediaQuery);
}

function callback(value, reference) {
    console.log(value);
    document.querySelector('body').innerText = value;
}
watcher(callback);
</script>
</html>